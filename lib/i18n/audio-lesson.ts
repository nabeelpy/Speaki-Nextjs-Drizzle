/**
 * UI translations for the audio lesson interface.
 * Keys match the component strings; locale is BCP 47 (e.g. en-US, es-ES).
 */

export type AudioLessonLocale = 'en-US' | 'es-ES' | 'fr-FR' | 'de-DE' | 'pt-BR' | 'ja-JP' | 'zh-CN' | 'ko-KR' | 'ar-SA' | 'hi-IN'

export const AUDIO_LESSON_TRANSLATIONS: Record<
  AudioLessonLocale,
  Record<string, string>
> = {
  'en-US': {
    turnOf: 'Turn',
    of: 'of',
    elapsedTime: 'Elapsed time',
    listeningTo: 'Listening to',
    recording: 'Recording your response...',
    liveTranscription: 'Live Transcription:',
    say: 'Say',
    processing: 'Processing your speech...',
    yourTurnAs: 'Your turn as',
    startRecording: 'Start Recording',
    stopRecording: 'Stop Recording',
    conversationComplete: 'Conversation Complete!',
    yourResponses: 'Your Responses',
    totalTime: 'Total Time',
    completeConversationAudio: 'Complete Conversation Audio',
    totalExchanges: 'total exchanges',
    listenComplete: 'Listen to your complete conversation with all exchanges played in order.',
    playCompleteConversation: 'Play Complete Conversation',
    stopPlayback: 'Stop Playback',
    playing: 'Playing...',
    readyToPlay: 'Ready to play',
    playingCombined: 'Playing combined audio...',
    completeTranscript: 'Complete Transcript:',
    backToCourse: 'Back to Course',
    language: 'Language',
    voiceAccent: 'Voice accent',
    selectLanguage: 'Select language',
    selectVoice: 'Select voice',
    noVoiceForLanguage: 'No voice is available for this language on your device. You can still read the text and romanization. To hear speech: install a language pack (e.g. Windows: Settings → Time & language → Language & region) or try another browser or device (e.g. Chrome on Android often has more voices).',
    inEnglish: 'In English:',
  },
  'es-ES': {
    turnOf: 'Turno',
    of: 'de',
    elapsedTime: 'Tiempo transcurrido',
    listeningTo: 'Escuchando a',
    recording: 'Grabando tu respuesta...',
    liveTranscription: 'Transcripción en vivo:',
    say: 'Di',
    processing: 'Procesando tu voz...',
    yourTurnAs: 'Tu turno como',
    startRecording: 'Iniciar grabación',
    stopRecording: 'Detener grabación',
    conversationComplete: '¡Conversación completada!',
    yourResponses: 'Tus respuestas',
    totalTime: 'Tiempo total',
    completeConversationAudio: 'Audio de la conversación completa',
    totalExchanges: 'intercambios en total',
    listenComplete: 'Escucha tu conversación completa con todos los intercambios en orden.',
    playCompleteConversation: 'Reproducir conversación completa',
    stopPlayback: 'Detener reproducción',
    playing: 'Reproduciendo...',
    readyToPlay: 'Listo para reproducir',
    playingCombined: 'Reproduciendo audio combinado...',
    completeTranscript: 'Transcripción completa:',
    backToCourse: 'Volver al curso',
    language: 'Idioma',
    voiceAccent: 'Acento de voz',
    selectLanguage: 'Seleccionar idioma',
    selectVoice: 'Seleccionar voz',
  },
  'fr-FR': {
    turnOf: 'Tour',
    of: 'sur',
    elapsedTime: 'Temps écoulé',
    listeningTo: 'Écoute de',
    recording: 'Enregistrement de votre réponse...',
    liveTranscription: 'Transcription en direct :',
    say: 'Dites',
    processing: 'Traitement de votre parole...',
    yourTurnAs: 'Votre tour en tant que',
    startRecording: 'Démarrer l\'enregistrement',
    stopRecording: 'Arrêter l\'enregistrement',
    conversationComplete: 'Conversation terminée !',
    yourResponses: 'Vos réponses',
    totalTime: 'Temps total',
    completeConversationAudio: 'Audio de la conversation complète',
    totalExchanges: 'échanges au total',
    listenComplete: 'Écoutez votre conversation complète avec tous les échanges dans l\'ordre.',
    playCompleteConversation: 'Lire la conversation complète',
    stopPlayback: 'Arrêter la lecture',
    playing: 'Lecture...',
    readyToPlay: 'Prêt à jouer',
    playingCombined: 'Lecture de l\'audio combiné...',
    completeTranscript: 'Transcription complète :',
    backToCourse: 'Retour au cours',
    language: 'Langue',
    voiceAccent: 'Accent de la voix',
    selectLanguage: 'Choisir la langue',
    selectVoice: 'Choisir la voix',
  },
  'de-DE': {
    turnOf: 'Runde',
    of: 'von',
    elapsedTime: 'Verstrichene Zeit',
    listeningTo: 'Hören von',
    recording: 'Aufnahme Ihrer Antwort...',
    liveTranscription: 'Live-Transkript:',
    say: 'Sagen Sie',
    processing: 'Ihre Sprache wird verarbeitet...',
    yourTurnAs: 'Sie sind dran als',
    startRecording: 'Aufnahme starten',
    stopRecording: 'Aufnahme stoppen',
    conversationComplete: 'Gespräch abgeschlossen!',
    yourResponses: 'Ihre Antworten',
    totalTime: 'Gesamtzeit',
    completeConversationAudio: 'Vollständige Gesprächsaufnahme',
    totalExchanges: 'Austausche insgesamt',
    listenComplete: 'Hören Sie Ihr vollständiges Gespräch mit allen Austauschen in Reihenfolge.',
    playCompleteConversation: 'Vollständiges Gespräch abspielen',
    stopPlayback: 'Wiedergabe stoppen',
    playing: 'Wird abgespielt...',
    readyToPlay: 'Bereit zum Abspielen',
    playingCombined: 'Kombinierte Aufnahme wird abgespielt...',
    completeTranscript: 'Vollständiges Transkript:',
    backToCourse: 'Zurück zum Kurs',
    language: 'Sprache',
    voiceAccent: 'Stimmakzent',
    selectLanguage: 'Sprache wählen',
    selectVoice: 'Stimme wählen',
  },
  'pt-BR': {
    turnOf: 'Turno',
    of: 'de',
    elapsedTime: 'Tempo decorrido',
    listeningTo: 'Ouvindo',
    recording: 'Gravando sua resposta...',
    liveTranscription: 'Transcrição ao vivo:',
    say: 'Diga',
    processing: 'Processando sua fala...',
    yourTurnAs: 'Sua vez como',
    startRecording: 'Iniciar gravação',
    stopRecording: 'Parar gravação',
    conversationComplete: 'Conversa concluída!',
    yourResponses: 'Suas respostas',
    totalTime: 'Tempo total',
    completeConversationAudio: 'Áudio da conversa completa',
    totalExchanges: 'trocas no total',
    listenComplete: 'Ouça sua conversa completa com todas as trocas em ordem.',
    playCompleteConversation: 'Reproduzir conversa completa',
    stopPlayback: 'Parar reprodução',
    playing: 'Reproduzindo...',
    readyToPlay: 'Pronto para reproduzir',
    playingCombined: 'Reproduzindo áudio combinado...',
    completeTranscript: 'Transcrição completa:',
    backToCourse: 'Voltar ao curso',
    language: 'Idioma',
    voiceAccent: 'Sotaque da voz',
    selectLanguage: 'Selecionar idioma',
    selectVoice: 'Selecionar voz',
  },
  'ja-JP': {
    turnOf: 'ターン',
    of: '/',
    elapsedTime: '経過時間',
    listeningTo: '再生中',
    recording: '応答を録音しています...',
    liveTranscription: 'ライブ文字起こし:',
    say: '言う',
    processing: '音声を処理しています...',
    yourTurnAs: 'あなたの番（',
    startRecording: '録音開始',
    stopRecording: '録音停止',
    conversationComplete: '会話完了！',
    yourResponses: 'あなたの応答数',
    totalTime: '合計時間',
    completeConversationAudio: '会話全体の音声',
    totalExchanges: '回のやり取り',
    listenComplete: 'やり取りを順番に再生して会話全体を聞けます。',
    playCompleteConversation: '会話全体を再生',
    stopPlayback: '再生停止',
    playing: '再生中...',
    readyToPlay: '再生準備完了',
    playingCombined: '結合音声を再生中...',
    completeTranscript: '完全な文字起こし:',
    backToCourse: 'コースに戻る',
    language: '言語',
    voiceAccent: '音声のアクセント',
    selectLanguage: '言語を選択',
    selectVoice: '音声を選択',
  },
  'zh-CN': {
    turnOf: '第',
    of: '轮，共',
    elapsedTime: '已用时间',
    listeningTo: '正在播放',
    recording: '正在录制您的回答...',
    liveTranscription: '实时转写：',
    say: '说',
    processing: '正在处理您的语音...',
    yourTurnAs: '轮到你扮演',
    startRecording: '开始录制',
    stopRecording: '停止录制',
    conversationComplete: '对话完成！',
    yourResponses: '您的回答数',
    totalTime: '总时长',
    completeConversationAudio: '完整对话音频',
    totalExchanges: '轮对话',
    listenComplete: '按顺序收听完整对话。',
    playCompleteConversation: '播放完整对话',
    stopPlayback: '停止播放',
    playing: '播放中...',
    readyToPlay: '准备播放',
    playingCombined: '正在播放合并音频...',
    completeTranscript: '完整文稿：',
    backToCourse: '返回课程',
    language: '语言',
    voiceAccent: '语音口音',
    selectLanguage: '选择语言',
    selectVoice: '选择语音',
  },
  'ko-KR': {
    turnOf: '턴',
    of: '/',
    elapsedTime: '경과 시간',
    listeningTo: '재생 중',
    recording: '응답 녹음 중...',
    liveTranscription: '실시간 전사:',
    say: '말하기',
    processing: '음성 처리 중...',
    yourTurnAs: '당신 차례 (',
    startRecording: '녹음 시작',
    stopRecording: '녹음 중지',
    conversationComplete: '대화 완료!',
    yourResponses: '응답 횟수',
    totalTime: '총 시간',
    completeConversationAudio: '전체 대화 오디오',
    totalExchanges: '회 교환',
    listenComplete: '전체 대화를 순서대로 들어보세요.',
    playCompleteConversation: '전체 대화 재생',
    stopPlayback: '재생 중지',
    playing: '재생 중...',
    readyToPlay: '재생 준비됨',
    playingCombined: '통합 오디오 재생 중...',
    completeTranscript: '전체 대본:',
    backToCourse: '코스로 돌아가기',
    language: '언어',
    voiceAccent: '음성 악센트',
    selectLanguage: '언어 선택',
    selectVoice: '음성 선택',
  },
  'ar-SA': {
    turnOf: 'الدورة',
    of: 'من',
    elapsedTime: 'الوقت المنقضي',
    listeningTo: 'الاستماع إلى',
    recording: 'جاري تسجيل إجابتك...',
    liveTranscription: 'النسخ المباشر:',
    say: 'قل',
    processing: 'جاري معالجة كلامك...',
    yourTurnAs: 'دورك كـ',
    startRecording: 'بدء التسجيل',
    stopRecording: 'إيقاف التسجيل',
    conversationComplete: 'اكتملت المحادثة!',
    yourResponses: 'إجاباتك',
    totalTime: 'الوقت الإجمالي',
    completeConversationAudio: 'تسجيل المحادثة الكاملة',
    totalExchanges: 'تبادلات إجمالية',
    listenComplete: 'استمع إلى محادثتك الكاملة بجميع التبادلات بالترتيب.',
    playCompleteConversation: 'تشغيل المحادثة الكاملة',
    stopPlayback: 'إيقاف التشغيل',
    playing: 'جاري التشغيل...',
    readyToPlay: 'جاهز للتشغيل',
    playingCombined: 'جاري تشغيل الصوت المجمع...',
    completeTranscript: 'النص الكامل:',
    backToCourse: 'العودة إلى الدورة',
    language: 'اللغة',
    voiceAccent: 'لهجة الصوت',
    selectLanguage: 'اختر اللغة',
    selectVoice: 'اختر الصوت',
  },
  'hi-IN': {
    turnOf: 'टर्न',
    of: '/',
    elapsedTime: 'बीता हुआ समय',
    listeningTo: 'सुन रहे हैं',
    recording: 'आपका जवाब रिकॉर्ड हो रहा है...',
    liveTranscription: 'लाइव ट्रांसक्रिप्शन:',
    say: 'बोलें',
    processing: 'आपकी आवाज़ प्रोसेस हो रही है...',
    yourTurnAs: 'आपकी बारी (',
    startRecording: 'रिकॉर्डिंग शुरू करें',
    stopRecording: 'रिकॉर्डिंग रोकें',
    conversationComplete: 'बातचीत पूरी हुई!',
    yourResponses: 'आपके जवाब',
    totalTime: 'कुल समय',
    completeConversationAudio: 'पूरी बातचीत का ऑडियो',
    totalExchanges: 'कुल एक्सचेंज',
    listenComplete: 'क्रम से पूरी बातचीत सुनें।',
    playCompleteConversation: 'पूरी बातचीत चलाएं',
    stopPlayback: 'प्लेबैक रोकें',
    playing: 'चल रहा है...',
    readyToPlay: 'चलाने के लिए तैयार',
    playingCombined: 'संयुक्त ऑडियो चल रहा है...',
    completeTranscript: 'पूर्ण ट्रांसक्रिप्ट:',
    backToCourse: 'कोर्स पर वापस जाएं',
    language: 'भाषा',
    voiceAccent: 'आवाज़ का उच्चारण',
    selectLanguage: 'भाषा चुनें',
    selectVoice: 'आवाज़ चुनें',
  },
}

const FALLBACK_LOCALE: AudioLessonLocale = 'en-US'

const LOCALE_BY_LANG: Record<string, AudioLessonLocale> = {
  en: 'en-US',
  es: 'es-ES',
  fr: 'fr-FR',
  de: 'de-DE',
  pt: 'pt-BR',
  ja: 'ja-JP',
  zh: 'zh-CN',
  ko: 'ko-KR',
  ar: 'ar-SA',
  hi: 'hi-IN',
}

/** Resolve to a supported UI locale (for translations). */
export function getUILocale(locale: string): AudioLessonLocale {
  const normalized = (locale || '').trim()
  if (isSupportedUILocale(normalized)) return normalized
  const lang = normalized.split('-')[0]?.toLowerCase()
  return (lang && LOCALE_BY_LANG[lang]) || FALLBACK_LOCALE
}

/** Get UI string for audio lesson. */
export function t(locale: string, key: string): string {
  const uiLocale = getUILocale(locale || FALLBACK_LOCALE)
  const dict = AUDIO_LESSON_TRANSLATIONS[uiLocale] ?? AUDIO_LESSON_TRANSLATIONS[FALLBACK_LOCALE]
  return dict[key] ?? AUDIO_LESSON_TRANSLATIONS[FALLBACK_LOCALE][key] ?? key
}

/** Check if locale is supported for UI. */
export function isSupportedUILocale(locale: string): locale is AudioLessonLocale {
  return (locale || '') in AUDIO_LESSON_TRANSLATIONS
}
